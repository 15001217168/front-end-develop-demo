<html>
<head>
</head>
<body style="background: transparent;">
    <script src="scripts/docstrap.lib.js"></script>
    <script src="scripts/lunr.min.js"></script>
    <script src="scripts/fulltext-search.js"></script>

    <script type="text/x-docstrap-searchdb">
    {"global.html":{"id":"global.html","title":"Global","body":" Documentation Namespaces ConversationIMMessageSystemMessage Classes IMSDK Global AudioFileGeoImageIMErrorVideo Global Members Audio 音频对象 Properties: Name Type Description url String url name String 名字 size Number 大小, 单位byte md5 String md5 mp3Url String 实时转成 mp3 流的 url, 此 url 支持的格式有: mp3, wav, aac, wma, wmv, amr, mp2, flac, vorbis, ac3 ext String 扩展名 dur Number 长度, 单位ms See: 图片对象 视频对象 文件对象 地理位置对象 File 文件对象 Properties: Name Type Description url String url name String 名字 size Number 大小, 单位byte md5 String md5 ext String 扩展名 See: 图片对象 音频对象 视频对象 地理位置对象 Geo 地理位置对象 Properties: Name Type Description lng Number 经度 lat Number 纬度 title String 地址描述 See: 图片对象 音频对象 视频对象 文件对象 Image 图片对象 Properties: Name Type Description url String url name String 名字 size Number 大小, 单位byte md5 String md5 ext String 扩展名 w String 宽, 单位px h String 高, 单位px See: 音频对象 视频对象 文件对象 地理位置对象 &lt;readonly&gt; IMError 错误对象格式 Properties: Name Type Description message String 错误消息 code Number 错误状态码 data Object 错误数据 Video 视频对象 Properties: Name Type Description url String url name String 名字 size Number 大小, 单位byte md5 String md5 ext String 扩展名 dur Number 长度, 单位ms w Number 宽, 分辨率, 单位px h Number 高, 分辨率, 单位px See: 图片对象 音频对象 文件对象 地理位置对象 × Search results Close Documentation generated by JSDoc 3.5.5 on 2019-02-12T14:48:59+08:00 using the DocStrap template. "},"classes.list.html":{"id":"classes.list.html","title":"Classes","body":" Documentation Namespaces ConversationIMMessageSystemMessage Classes IMSDK Global AudioFileGeoImageIMErrorVideo Classes Classes IMSDK Namespaces Conversation IMMessage SystemMessage × Search results Close Documentation generated by JSDoc 3.5.5 on 2019-02-12T14:48:59+08:00 using the DocStrap template. "},"namespaces.list.html":{"id":"namespaces.list.html","title":"Namespaces","body":" Documentation Namespaces ConversationIMMessageSystemMessage Classes IMSDK Global AudioFileGeoImageIMErrorVideo Namespaces Classes IMSDK Namespaces Conversation IMMessage SystemMessage × Search results Close Documentation generated by JSDoc 3.5.5 on 2019-02-12T14:48:59+08:00 using the DocStrap template. "},"index.html":{"id":"index.html","title":"Index","body":" Documentation Namespaces ConversationIMMessageSystemMessage Classes IMSDK Global AudioFileGeoImageIMErrorVideo IM基础概念为了达到消息标准化能力，需要把基本概念和接口达成一致。梳理两个基础概念： 会话 和 消息。 IMSDK类标准化接入文档 会话conversation: 它是指AB通讯之间维持的一种关系，它是消息存储的载体 消息message: 消息是一个对话的基本组成部分, 根据业务分为两大块消息，会话内消息和系统通知消息。会话内消息又可以分为基本消息和自定义消息。 会话即时通讯 SDK 的核心概念「会话」，即 Conversation。我们将单聊和群聊（包括聊天室）的消息发送和接收都依托于 Conversation 这个统一的概念进行操作。会话数据格式 会话属性管理 会话属性 备注 id 会话ID scene 场景 to 聊天对象，账号或者群ID updateTime 会话更新时间 unread 未读数 lastMsg 此会话的最后一条消息 custom 扩展Json字符串 消息类型IM SDK内的消息可以分为两类：会话内消息和系统通知消息。消息数据格式 会话内消息会话内消息只能出现并展示在聊天界面里，一般是应用内的一个用户发给另一个用户（或群组/聊天室）的消息，例如文本消息、图片消息都属于会话内消息。： 会话内消息类型 备注 文本消息 消息内容为普通文本 图片消息 消息内容为图片URL地址、尺寸、图片大小等信息 语音消息 消息内容为语音URL地址、时长、大小、格式等信息 视频消息 消息内容为视频文件的URL地址、时长、大小、格式等信息 文件消息 消息内容为文件的URL地址、大小、格式等信息，格式不限 地理位置消息 消息内容为地理位置标题、经度、纬度信息 通知消息 自定义消息\b可以用于消息接入扩展。 例如卡片消息，红包消息等。 自定义消息 通知消息属于会话内的一种消息，\b用于会话内通知和提示场景。\b例如：群名称更新、某某某退出了群聊等。 自定义消息自定义消息\b可以用于消息接入扩展。 例如卡片消息，红包消息等。 通知消息通知消息属于会话内的一种消息，\b用于会话内通知和提示场景。\b例如：群名称更新、某某某退出了群聊等。 系统通知消息系统通知一般在会话维度，通常用于验证关系。例如：某某某请求加你为好友等。 × Search results Close Documentation generated by JSDoc 3.5.5 on 2019-02-12T14:48:59+08:00 using the DocStrap template. "},"Conversation.html":{"id":"Conversation.html","title":"Namespace: Conversation","body":" Documentation Namespaces ConversationIMMessageSystemMessage Classes IMSDK Global AudioFileGeoImageIMErrorVideo Namespace: Conversation Conversation Properties: Name Type Description id String 会话ID scene String 场景 to String 聊天对象, 账号或群ID updateTime Long 会话更新的时间 unread Number 未读数 lastMsg Message 此会话的最后一条消息 custom String 自定义消息 × Search results Close Documentation generated by JSDoc 3.5.5 on 2019-02-12T14:48:59+08:00 using the DocStrap template. "},"IMMessage.html":{"id":"IMMessage.html","title":"Namespace: IMMessage","body":" Documentation Namespaces ConversationIMMessageSystemMessage Classes IMSDK Global AudioFileGeoImageIMErrorVideo Namespace: IMMessage IMMessage 消息体设计尽量偏平化 Properties: Name Type Argument Default Description conversationId String 消息所属的会话的ID id String 服务器用于区分消息用的ID, `会涉及消息重发重复`, 所以开发者应该使用`idClient`来唯一标识消息 idClient String SDK生成的消息id, 在发送消息之后会返回给开发者, 开发者可以在发送消息的结果回调里面根据这个ID来判断相应消息的发送状态, 到底是发送成功了还是发送失败了, 然后根据此状态来更新页面的UI。如果发送失败, 那么可以重新发送此消息 scene String &lt;optional&gt; 'single' 场景 type String 消息类型 from String 消息发送方, 帐号 to String 消息接收方, 帐号或群id time Number 消息时间戳 flow String 消息的流向 - `'in'`表示此消息是收到的消息 - `'out'`表示此消息是发出的消息 status String 消息发送状态 - `'sending'` 发送中 - `'success'` 发送成功 - `'fail'` 发送失败 content String &lt;optional&gt; 文本消息的文本内容, 请参考发送文本消息 file Object &lt;optional&gt; 文件消息的文件对象, 具体字段请参考图片对象、音频对象、视频对象和文件对象, 请参考发送文件消息 geo Object &lt;optional&gt; 地理位置消息的地理位置对象, 请参考发送地理位置消息 tip String &lt;optional&gt; 提醒消息的内容 resend Boolean 是否是重发的消息 custom String &lt;optional&gt; 扩展字段, `用途扩展自定消息` - 推荐使用`JSON`格式构建, 非`JSON`格式的话, Web端会正常接收, 但是会被其它端丢弃 Members &lt;static, readonly&gt; scene :String 场景 - `'p2p'` (单人聊天) - `'team'` (群聊) Type: String &lt;static, readonly&gt; type :String 消息类型 - `'text'` (文本) - `'image'` (图片) - `'audio'` (音频) - `'video'` (视频) - `'file'` (文件) - `'geo'` (地理位置) - `'custom'` (自定义消息) - `'tip'` (提醒消息) - 提醒消息用于会话内的状态提醒，如进入会话时出现的欢迎消息，或者会话命中敏感词后的提示消息等等. - `'notification'` (群通知消息) - 某些群操作后所有群成员会收到一条相应的群通知消息, 详细介绍请参考群通知消息的类型 - 此类消息不会计入未读数 Type: String × Search results Close Documentation generated by JSDoc 3.5.5 on 2019-02-12T14:48:59+08:00 using the DocStrap template. "},"IMSDK.html":{"id":"IMSDK.html","title":"Class: IMSDK","body":" Documentation Namespaces ConversationIMMessageSystemMessage Classes IMSDK Global AudioFileGeoImageIMErrorVideo Class: IMSDK IMSDK new IMSDK(options) 消息基础SDK，`回调函数全部小写` Parameters: Name Type Description options Object 配置参数 Properties Name Type Argument Description appKey String 应用APPKEY biz String 业务类型, BC, CC, 小蜜等 业务类型 targetId String 目标用户Id, 可以是群ID或者用户Nick account String &lt;optional&gt; 账号Id或者Nick onlogin function 登入回调，可以拿到用户信息 onconnect function 连接建立后的回调, 会传入一个对象, 包含登录的信息 onclose function 断开连接后的回调 onerror function 发生错误回调 消息错误 onmsg function 实时消息回调 消息体 onsystemmsg function 系统消息回调 onofflinemsg function 离线消息，漫游消息，历史消息回调 消息体 onconversation function 同步最近会话会话列表回调, 会传入会话列表。 Example const imsdk = new IMSDK({ appkey: 'appKey', targetId: '红包测试账号', account: 'account', onlogin: onLogin, onclose: onClose, onerror: onError, onmsg: onMsg, onsystemmsg: onSystemMsg, onofflinemsg: onOfflineMsg, onconversation: onConversation }) const onLogin = (user: IMUser) =&gt; { // user 用户信息 } const onError = (error: IMError) =&gt; { // 错误对象处理 } const onMsg = (msgs: IMMessage[]) =&gt; { // 实时消息同步 } const onSystemMsg = (msgs: IMSystemMessage[]) =&gt; { // 系统通知消息 // 通知消息属于`会话内`的一种消息，\b用于会话内通知和提示场景。\b例如：群名称更新、某某某退出了群聊等 } const onOfflineMsg = (msgs: IMMessage[]) =&gt; { // 离线消息，漫游消息，历史消息回调 } const onConversation = (conversation: Conversation[]) =&gt; { // 最近会话 } Members &lt;static, readonly&gt; biz 垂直业务类型 - '`BC`' 旺旺聊天 - '`CC`' 淘宝聊天 - '`xiaomi`' 小蜜聊天 Methods getInstance() 获取当前实例 Returns: context 当前上下文 - context.user 用户信息 - context.session 当前会话信息 Type Object getOfflineMsg(snycId) 获取离线消息，漫游消息，历史消息 Parameters: Name Type Description snycId Number 同步标记Id sendMsg(message) 发送消息 Parameters: Name Type Description message IMMessage 消息对象 Returns: promise Type Promise sendSystemNotice(message) 发送系统通知 Parameters: Name Type Description message IMSystemMessage × Search results Close Documentation generated by JSDoc 3.5.5 on 2019-02-12T14:48:59+08:00 using the DocStrap template. "},"SystemMessage.html":{"id":"SystemMessage.html","title":"Namespace: SystemMessage","body":" Documentation Namespaces ConversationIMMessageSystemMessage Classes IMSDK Global AudioFileGeoImageIMErrorVideo Namespace: SystemMessage SystemMessage 通知消息属于`会话内`的一种消息，\b用于会话内通知和提示场景。\b例如：群名称更新、某某某退出了群聊等 Properties: Name Type Argument Description msgId String 消息Id time Number 时间戳 type String &lt;optional&gt; 系统通知类型 from String 系统通知的来源, 账号或者群ID to String 系统通知的目标, 账号或者群ID read Boolean &lt;optional&gt; 内建系统通知是否已读 state NIMError &lt;optional&gt; 内建系统通知的state状态 scene String &lt;optional&gt; 自定义系系统通知的场景, 参考消息场景 content String &lt;optional&gt; 文本消息内容 custom String &lt;optional&gt; 自定义消息内容，`JSONString`格式 × Search results Close Documentation generated by JSDoc 3.5.5 on 2019-02-12T14:48:59+08:00 using the DocStrap template. "}}
    </script>

    <script type="text/javascript">
        $(document).ready(function() {
            Searcher.init();
        });

        $(window).on("message", function(msg) {
            var msgData = msg.originalEvent.data;

            if (msgData.msgid != "docstrap.quicksearch.start") {
                return;
            }

            var results = Searcher.search(msgData.searchTerms);

            window.parent.postMessage({"results": results, "msgid": "docstrap.quicksearch.done"}, "*");
        });
    </script>
</body>
</html>
